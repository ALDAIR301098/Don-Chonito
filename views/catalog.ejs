<!DOCTYPE html>
<html lang="es">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Panaderia Don Chonito</title>
    <link rel="stylesheet" href="resources/css/catalog.css">
    <link rel="stylesheet" href="resources/css/theme.css">
    <link rel="stylesheet"
        href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined:opsz,wght,FILL,GRAD@48,700,0,0" />
    <script src="catalog.js"></script>
</head>

<body>

    <header>
        <div class="company">
            <img src="resources/images/logo_don_chonito.png" alt="Logo">
            <h1>Panaderia Don Chonito</h1>
        </div>
        <nav>
            <ul>
                <li>
                    <p>Mi cuenta</p>
                </li>
                <li>
                    <div class="cart-container">
                        <span class="material-symbols-outlined">
                            add_shopping_cart
                        </span>
                        <p id="txtCart">0 Piezas</p>
                    </div>
                </li>
            </ul>
        </nav>
    </header>

    <main>

        <%rows.forEach(breads=>{%>
            <div class="product-container">
                <h3><%= breads.name %></h3>
                <img src={"https://" + window.location.hostname + "/" + "<%= breads.imageUrl %>"} alt="<%= breads.imageUrl %>">
                <h3>$<%= breads.price %>.00 mxn</h3>

                <div class="quantity-container">
                    <button class="btn-remove-bread" onclick="
                        let quantity0 = parseInt(document.getElementById('quantity<%= breads.breadId %>').innerText) - 1
                        if(quantity0 >= 0){
                            document.getElementById('quantity<%= breads.breadId %>').innerText = quantity0;
                            if(quantity0 == 0){
                                document.getElementById('btn-add-breads-disabled<%= breads.breadId %>').classList = 'btn-add-breads-disabled'
                            }
                        } 
                    ">
                        <span class="material-symbols-outlined"> remove</span>
                    </button>
                    <p id="quantity<%= breads.breadId %>">0</p>
                    <button class="btn-add-bread" onclick="
                    let quantity = parseInt(document.getElementById('quantity<%= breads.breadId %>').innerText)
                    document.getElementById('quantity<%= breads.breadId %>').innerText = quantity + 1;
                    document.getElementById('btn-add-breads-disabled<%= breads.breadId %>').classList = 'btn-add-breads-enabled'
                    ">
                        <span class="material-symbols-outlined">add</span>
                    </button>
                </div>

                <button class="btn-add-breads-disabled" id="btn-add-breads-disabled<%= breads.breadId %>" onclick="
                        let cart = document.getElementById('txtCart');
                        let cartQuantity = parseInt(cart.innerText);  //0
                        console.log(cartQuantity);
                        let txtQuantity = document.getElementById('quantity<%= breads.breadId %>');
                        let breadQuantity = parseInt(txtQuantity.innerText); 
                        if(breadQuantity > 0){
                            let newQuantity = cartQuantity + breadQuantity;
                            cart.innerText = `${breadQuantity} Piezas`;
                            txtQuantity.innerText = 0;
                            document.getElementById('btn-add-breads-disabled<%= breads.breadId %>').classList = 'btn-add-breads-disabled'
                        }
                    ">
                    <span class="material-symbols-outlined">
                        add_shopping_cart
                    </span>
                    Agregar
                </button>

            </div>
        <%})%>

    </main>

    

</body>

</html>